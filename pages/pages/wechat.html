<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微信浏览器检测</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#FF7D00',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .backdrop-blur-sm {
                backdrop-filter: blur(4px);
            }
            .animate-fade-in {
                animation: fadeIn 0.3s ease-in-out;
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            .animate-slide-up {
                animation: slideUp 0.4s ease-out;
            }
            @keyframes slideUp {
                from { transform: translateY(20px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans min-h-screen">
    <!-- 主内容区域 -->
    <div class="container mx-auto px-4 py-8 max-w-3xl">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 animate-slide-up">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mr-4">
                    <i class="fa fa-globe text-primary text-xl"></i>
                </div>
                <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-gray-800">示例网站</h1>
            </div>
            
            <p class="text-gray-600 mb-6">这是一个示例页面，展示如何检测微信浏览器并提示用户在外部浏览器中打开以获得最佳体验。</p>
            
            <div class="bg-blue-50 border-l-4 border-primary p-4 mb-6 rounded-r-lg">
                <div class="flex items-start">
                    <i class="fa fa-info-circle text-primary mt-1 mr-3"></i>
                    <div>
                        <p class="text-primary font-medium">提示：</p>
                        <p class="text-gray-700">此页面某些功能可能在微信浏览器中受限，请使用外部浏览器打开以获得最佳体验。</p>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <div class="bg-gray-50 rounded-lg p-5 border border-gray-200">
                    <div class="flex items-center mb-3">
                        <i class="fa fa-shield text-primary mr-3"></i>
                        <h3 class="font-medium text-gray-800">安全浏览</h3>
                    </div>
                    <p class="text-gray-600 text-sm">外部浏览器提供更全面的安全保护，确保您的数据安全。</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-5 border border-gray-200">
                    <div class="flex items-center mb-3">
                        <i class="fa fa-bolt text-primary mr-3"></i>
                        <h3 class="font-medium text-gray-800">更快加载</h3>
                    </div>
                    <p class="text-gray-600 text-sm">在原生浏览器中打开可获得更快的加载速度和更好的性能。</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-5 border border-gray-200">
                    <div class="flex items-center mb-3">
                        <i class="fa fa-th text-primary mr-3"></i>
                        <h3 class="font-medium text-gray-800">完整功能</h3>
                    </div>
                    <p class="text-gray-600 text-sm">部分高级功能仅在外部浏览器中可用。</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-5 border border-gray-200">
                    <div class="flex items-center mb-3">
                        <i class="fa fa-smile-o text-primary mr-3"></i>
                        <h3 class="font-medium text-gray-800">更好体验</h3>
                    </div>
                    <p class="text-gray-600 text-sm">专为浏览器优化的界面提供更流畅的用户体验。</p>
                </div>
            </div>
            
            <div class="space-y-4">
                <a href="#" class="block w-full py-3 px-4 bg-primary hover:bg-primary/90 text-white rounded-lg text-center font-medium transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                    点击继续浏览
                </a>
                
                <a href="#" class="block w-full py-3 px-4 bg-white hover:bg-gray-50 text-primary border border-primary rounded-lg text-center font-medium transition-all duration-300">
                    <i class="fa fa-question-circle mr-2"></i>了解更多
                </a>
            </div>
        </div>
        
        <footer class="text-center text-gray-500 text-sm py-4">
            <p>© 2023 示例网站 版权所有</p>
        </footer>
    </div>

    <!-- 微信提示遮罩层 (默认隐藏) -->
    <div id="wechatMask" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-xl p-6 max-w-md w-full relative shadow-2xl animate-slide-up">
            <div class="absolute -top-3 -right-3 bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center cursor-pointer hover:bg-primary/90 transition-colors duration-300" id="closeMask">
                <i class="fa fa-times"></i>
            </div>
            
            <div class="flex items-start mb-6">
                <div class="bg-primary/10 p-3 rounded-lg mr-4">
                    <i class="fa fa-wechat text-2xl text-primary"></i>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">在微信中打开</h3>
                    <p class="text-gray-600">由于微信浏览器限制，部分功能可能无法正常使用。</p>
                </div>
            </div>
            
            <div class="border-t border-gray-200 pt-4 pb-6">
                <div class="flex items-center mb-4">
                    <div class="flex-shrink-0 w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mr-4">
                        <i class="fa fa-share-alt text-gray-500 text-xl"></i>
                    </div>
                    <div>
                        <p class="text-gray-800 font-medium">点击右上角</p>
                        <p class="text-gray-500 text-sm">选择"在浏览器中打开"</p>
                    </div>
                </div>
                
                <div class="flex items-center">
                    <div class="flex-shrink-0 w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mr-4">
                        <i class="fa fa-download text-gray-500 text-xl"></i>
                    </div>
                    <div>
                        <p class="text-gray-800 font-medium">下载完整应用</p>
                        <p class="text-gray-500 text-sm">获取更好的体验</p>
                    </div>
                </div>
            </div>
            
            <div class="space-y-3">
                <button id="openInBrowser" class="w-full py-3 px-4 bg-primary hover:bg-primary/90 text-white rounded-lg text-center font-medium transition-all duration-300 shadow-md hover:shadow-lg flex items-center justify-center">
                    <i class="fa fa-external-link mr-2"></i>在浏览器中打开
                </button>
                
                <button id="copyLink" class="w-full py-3 px-4 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg text-center font-medium transition-all duration-300 flex items-center justify-center">
                    <i class="fa fa-link mr-2"></i>复制链接地址
                </button>
                
                <button id="ignoreWarning" class="w-full py-2 px-4 text-gray-500 hover:text-gray-700 text-sm transition-colors duration-300">
                    暂时忽略，继续在微信中浏览
                </button>
            </div>
        </div>
    </div>

    <script>
        // 检测是否在微信浏览器中打开
        function isWechatBrowser() {
            const ua = navigator.userAgent.toLowerCase();
            return ua.indexOf('micromessenger') !== -1;
        }

        // 检测iOS设备
        function isIOS() {
            return /iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());
        }

        // 显示微信提示
        function showWechatModal() {
            const wechatMask = document.getElementById('wechatMask');
            const openInBrowser = document.getElementById('openInBrowser');
			
			wechatMask.classList.remove('hidden');
            
			// iOS设备上添加特殊提示
            if (isIOS()) {
                const iosTip = document.createElement('p');
                iosTip.className = 'text-gray-500 text-sm mt-3 text-center';
                iosTip.innerHTML = '<i class="fa fa-info-circle mr-1"></i> iPhone用户可能需要先复制链接再在浏览器中打开';
                openInBrowser.parentNode.insertBefore(iosTip, openInBrowser.nextSibling);
            }
        }

        // 关闭微信提示
        function closeWechatModal() {
            const wechatMask = document.getElementById('wechatMask');
			wechatMask.classList.add('opacity-0');
            setTimeout(() => {
				wechatMask.classList.add('hidden');
            }, 300);
        }

        // 复制当前URL到剪贴板
        function copyCurrentUrl() {
            const textArea = document.createElement("textarea");
            textArea.value = window.location.href;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            return true;
        }

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            const wechatMask = document.getElementById('wechatMask');
            const closeMask = document.getElementById('closeMask');
            const openInBrowser = document.getElementById('openInBrowser');
            const copyLink = document.getElementById('copyLink');
            const ignoreWarning = document.getElementById('ignoreWarning');

            // 如果在微信浏览器中打开，则显示提示遮罩层
            if (isWechatBrowser()) {
                showWechatModal();
            }

            // 绑定关闭按钮事件
            closeMask.addEventListener('click', closeWechatModal);

            // 在浏览器中打开按钮点击事件
            openInBrowser.addEventListener('click', function() {
                alert('由于微信限制，请手动点击右上角菜单选择"在浏览器中打开"');
            });

            // 复制链接按钮点击事件
            copyLink.addEventListener('click', function() {
                if (copyCurrentUrl()) {
                    alert('链接已复制到剪贴板！');
                } else {
                    alert('复制失败，请手动复制链接：' + window.location.href);
                }
            });

            // 忽略警告，继续浏览
            ignoreWarning.addEventListener('click', function() {
                wechatMask.classList.add('opacity-0');
                setTimeout(() => {
                    wechatMask.classList.add('hidden');
                }, 300);
                
                // 存储用户选择，避免重复提示
                localStorage.setItem('ignoreWechatWarning', 'true');
            });

            // 检查用户是否选择了忽略警告
            if (localStorage.getItem('ignoreWechatWarning') === 'true') {
                wechatMask.classList.add('hidden');
            }

            // 为所有下载链接添加微信检测
            const downloadLinks = document.querySelectorAll('a[href^="https://pan.gzxlscan.cn"]');
            downloadLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (isWechatBrowser()) {
                        e.preventDefault();
                        showWechatModal();
                    }
                });
            });
        });
    </script>
</body>
</html>
    